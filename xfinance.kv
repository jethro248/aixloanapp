#:import Factory kivy.factory.Factory


<LoginScreen>:
    ### root ###

    ### root background ###
    Image:
        source: 'res/bg_2 (1).jpg'
        color: .5, .5, .5, .2
        
    BoxLayout
        orientation: 'vertical'
        padding: 200, 50

        ### background ###
        BoxLayout:
            orientation: 'vertical'
            canvas.after:
                Color:
                    rgba: .5, .5, .5, .2

                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                orientation: 'vertical'
                size_hint: 1, .3
                
                BoxLayout:
                    Image:
                        source: 'res/icon_3.jpg'

                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: ''
                    Label:
                        text: 'WELCOME TO XFINANCE'
                    Label:
                        text: 'Please login in to continue'
            
            BoxLayout:
                size_hint: 1, .6
                orientation: 'vertical'

                BoxLayout:
                    Label:
                        text: '    Username'
                        text_size: self.size
                        halign: 'left'
                        password: True
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        password: True
                        color: 1, .2, .2, 1
                        id: error_info_user_name

                TextInput:
                    hint_text: 'Enter your username here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: user_name

                BoxLayout:
                    Label:
                        text: '    Password'
                        text_size: self.size
                        halign: 'left'
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        id: error_info_login_passwd
                        color: 1, .2, .2, 1

                TextInput:
                    hint_text: 'Enter your password here'
                    password: True
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: login_passwd
                
                Label:
                    text: ''
            
            BoxLayout:
                size_hint: 1, .2
                padding: 50, 0
                orientation: 'vertical'
                Button:
                    text: 'Login'
                    on_release: root.goto_loan_application_scr()
                Label:
                    text: ''

<ConfirmationScreen>:
    ### root ###

    ### root background ###
    Image:
        source: 'res/bg_2 (1).jpg'
        color: .5, .5, .5, .2
    
    BoxLayout:
        orientation: 'vertical'
        padding: 200, 50

        ### background ###
        BoxLayout:
            orientation: 'vertical'
            canvas.after:
                Color:
                    rgba: .5, .5, .5, .2

                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                orientation: 'vertical'
                size_hint: 1, .2
                Label:
                    text: ''
                Label:
                    text: 'WELCOME TO XFINANCE'
                Label:
                    text: ''
                Label:
                    text: 'Please take note of these information. \n     You will use it next time to login.'
            
            BoxLayout:
                size_hint: 1, .7
                orientation: 'vertical'

                Label:
                    text: '    Username:    '
                    text_size: self.size
                    halign: 'left'
                    id: user_name
                Label:
                    text: '    Password:    '
                    text_size: self.size
                    halign: 'left'
                    id: passwd

                Label:
                    text: '    Please check your email for a code and enter it below'
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    hint_text: 'Enter confirmation code here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: confirmation_code
                
                Label:
                    text: ''
                    color: 1, .5, 0, 1
                    halign: 'left'
                    id: error_info_confirmation_code
            
            BoxLayout:
                size_hint: 1, .2
                padding: 50, 0
                orientation: 'vertical'
                Button:
                    text: 'Confirm'
                    on_release: root.goto_profile_scr()
                Label:
                    text: ''


<RegisterScreen>:
    ### root ###

    ### root background ###
    Image:
        source: 'res/bg_2 (1).jpg'
        color: .5, .5, .5, .2
    
    ### background ###
    BoxLayout:
        orientation: 'vertical'
        canvas.after:
            Color:
                rgba: .5, .5, .5, .2

            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            size_hint: 1, .2
            padding: 25, 10

            BoxLayout:
                size_hint: .2, 1
                Image:
                    source: 'res/icon_3.jpg'

            BoxLayout:
                size_hint: .8, 1
                padding: 20, 0
                Label:
                    on_ref_press: root.goto_terms_of_service_scr()
                    markup: True
                    text_size: self.size
                    text: 'Welcome to Xfinance. You can save with us and get interests! We offer quick loans with lowest rates. For more info contact: [color=ff55ff]finance.aixpro@gmail.com[/color]. Fill in the form below to continue. By continuing, you agree to our [b][ref=Terms of Service][color=9955ff]Terms of Service[/color][/ref][/b]. This info will used to setup your account and shall be kept confidential. Thanks for choosing us!'
        
        BoxLayout:
            size_hint: 1, .75

            BoxLayout:
                orientation: 'vertical'
                padding: 30, 10
                BoxLayout:
                    Label:
                        text: '    Full name'
                        text_size: self.size
                        halign: 'left'
                        password: True
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        color: 1, .5, 0, 1
                        id: error_info_full_name
                TextInput:
                    hint_text: 'Enter your Full name here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: full_name

                BoxLayout:
                    Label:
                        text: '    Email'
                        text_size: self.size
                        halign: 'left'
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        color: 1, .5, 0, 1
                        id: error_info_email
                TextInput:
                    hint_text: 'Enter your email here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: email
                    
                BoxLayout:
                    Label:
                        text: '    Phone number'
                        text_size: self.size
                        halign: 'left'
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        color: 1, .5, 0, 1
                        id: error_info_phone_no
                TextInput:
                    hint_text: 'Enter your Phone number here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: phone_no
                BoxLayout:
                    Label:
                        text: '    Date of birth'
                        text_size: self.size
                        halign: 'left'
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        color: 1, .5, 0, 1
                        id: error_info_date_of_birth
                TextInput:
                    hint_text: 'Enter your date of birth here eg. 02/05/1998'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: date_of_birth

            BoxLayout:
                orientation: 'vertical'
                padding: 20, 10
                BoxLayout:
                    Label:
                        text: '    NIN number'
                        text_size: self.size
                        halign: 'left'
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        color: 1, .5, 0, 1
                        id: error_info_nin_no
                TextInput:
                    hint_text: 'Enter your NIN number here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: nin_no

                BoxLayout:
                    Label:
                        text: '    Current occupation'
                        text_size: self.size
                        halign: 'left'
                        password: True
                    Label:
                        text: 'Please be accurate'
                        text_size: self.size
                        halign: 'right'
                        color: 1, 1, 1, 1
                        id: error_info_current_occupation
                TextInput:
                    hint_text: 'Enter your current occupation here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: current_occupation
                
                BoxLayout
                    Label:
                        text: '    Current residence'
                        text_size: self.size
                        halign: 'left'
                    Label:
                        text: 'Please be accurate'
                        text_size: self.size
                        halign: 'right'
                        color: 1, 1, 1, 1
                        id: error_info_current_residence
                TextInput:
                    hint_text: 'Enter your current place of residence here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: current_residence
                
                BoxLayout:
                    Label:
                        text: '    Create password'
                        text_size: self.size
                        halign: 'left'
                    Label:
                        text: ''
                        text_size: self.size
                        halign: 'right'
                        color: 1, .5, 0, 1
                        id: error_info_create_passwd

                TextInput:
                    hint_text: 'Enter your password here'
                    password: True
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: passwd
                
        BoxLayout:
            size_hint: 1, .15
            padding: 250, 20
            orientation: 'vertical'
            Button:
                text: 'Register'
                on_release: root.register_user()
            

<LoanApplicationScreen>:
    id: filechooser_layout

    ### root ###

    ### root background ###
    Image:
        source: 'res/bg_2 (1).jpg'
        color: .5, .5, .5, .2

    ### background ###
    BoxLayout:
        orientation: 'vertical'
        canvas.after:
            Color:
                rgba: .5, .5, .5, .2

            Rectangle:
                pos: self.pos
                size: self.size


        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, .12
            Label:
                text: 'LOAN APPLICATION FORM'
            Label:
                text: 'Please fill in the form below to continue. By continuing - you agree to our Terms of Service. \nConfirm if the info below is correct. If not, click update info to correct it before continuing.'
        
        BoxLayout:
            size_hint: 1, .75

            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: '    Full name: '
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: full_name
                Label:
                    text: '    Email: '
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: email
                Label:
                    text: '    Phone number: '
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: phone_no                  
                
                Label:
                    text: '    Date of birth: '
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: date_of_birth
                
                Label:
                    text: '    NIN number: '
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: nin_no
                
                Label:
                    text: '    Current residence: '
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: current_residence
                
                Label:
                    text: '    Current occupation: '
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: current_occupation
                
            BoxLayout:
                orientation: 'vertical'
                
                Label:
                    text: '    Security:'
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    hint_text: 'Enter the name your security here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: security
                    
                Label:
                    text: '    Trustee:'
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    hint_text: 'Enter contact of your trustee here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: trustee_contact
                
                Label:
                    text: '    Source of income to pay the loan'
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    hint_text: 'Enter your source of income to pay the loan here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: source_of_income

                Label:
                    text: '    Loan amount'
                    text_size: self.size
                    halign: 'left'
                    password: True
                TextInput:
                    hint_text: 'Enter loan amount here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: loan_amount

                Label:
                    text: '    Loan term'
                    text_size: self.size
                    halign: 'left'
                TextInput:
                    hint_text: 'Enter the graze period of the loan here'
                    foreground_color: 1, 1, 1, 1
                    background_color: .1, .1, .15, .95
                    multiline: False
                    id: loan_term
                
                Label:
                    text: '    Payback Date: ...'
                    text_size: self.size
                    halign: 'left'
                Label:
                    text: '    Payback Amount: ...'
                    text_size: self.size
                    halign: 'left'
                Label:
                    text: '    Notice: '
                    text_size: self.size
                    halign: 'left'
                Label:
                    text: ''

            BoxLayout:
                orientation: 'vertical'
                padding: 10, 10

                BoxLayout:
                    padding: 10, 10
                    orientation: 'vertical'
                    Image:
                        id: national_id
                        size_hint: 1, .7
                    Button:
                        text: 'Add National ID Image'
                        on_release: root.manager.current = 'file_picker_scr_1'
                        size_hint: 1, .3
                
                BoxLayout:
                    padding: 10, 10
                    orientation: 'vertical'
                    Image:
                        id: other_id_image
                        source: ''
                        size_hint: 1, .7
                    Button:
                        text: 'Add Other ID Image'
                        on_release: root.manager.current = 'file_picker_scr_2'
                        size_hint: 1, .3

                BoxLayout:
                    padding: 10, 10
                    orientation: 'vertical'
                    Image:
                        id: selfie_image
                        source: ''
                        size_hint: 1, .7
                    Button:
                        text: 'Add recent selfie Image'
                        on_release: root.manager.current = 'file_picker_scr_3'
                        size_hint: 1, .3

                BoxLayout:
                    padding: 10, 10
                    orientation: 'vertical'

                    
                    Image:
                        id: security_image
                        source: ''
                        size_hint: 1, .7
                    Button:
                        text: 'Add security documents Image'
                        on_release: root.manager.current = 'file_picker_scr_4'
                        size_hint: 1, .3
                                
        BoxLayout:
            size_hint: 1, .10
            padding: 10, 5

            BoxLayout:
                padding: 50, 10
                Button:
                    id: help
                    text: 'Help?'
                    on_release: Factory.InfoPopup().open()
            BoxLayout:
                padding: 50, 3
                Button:
                    text: 'Apply'
                    on_release: root.send_application()
            BoxLayout:
                padding: 20, 10
                orientation: 'vertical'
                Label:
                    id: error_info_image
                    color: .8, .2, .2, 1
                    text: ''
                Label:
                    id: error_info_details
                    color: .8, .2, .2, 1
                    text: ''

<InfoPopup@Popup>:
    id: info_popup
    auto_dismiss: False
    size_hint: .5, .5
    title: 'More info'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint: 1, .85
            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                Label:
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    padding: 10, 10
                    text: ' LOAN INFO: \n    Loan Rates: \n        09% - for 1 month \n        12% - for 1 to 2 months \n        15% - for 3+ months \n\n        Note that first time members \n        are limited from borrowing more \n        than 500,000 UGX.\n\n'
        BoxLayout:
            padding: 80, 0
            size_hint: 1, .15
            Button:
                text: 'Okay'
                on_release: root.dismiss()
               
            
<LoanConfirmationScreen>:
     ### root ###

    ### root background ###
    Image:
        source: 'res/bg_2 (1).jpg'
        color: .5, .5, .5, .2
    
    BoxLayout:
        orientation: 'vertical'
        padding: 200, 50

        ### background ###
        BoxLayout:
            orientation: 'vertical'
            canvas.after:
                Color:
                    rgba: .5, .5, .5, .2

                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                orientation: 'vertical'
                size_hint: 1, .2
                Label:
                    text: ''
                Label:
                    text: 'XFINANCE - LOAN PROGRESS'
                Label:
                    text: ''
                Label:
                    text: 'Your application has been received. \nYou will be notified on email if sucessfull.'
            
            BoxLayout:
                size_hint: 1, .7
                orientation: 'vertical'

                Label:
                Label:
                Label:
                Label:
            
            BoxLayout:
                size_hint: 1, .2
                padding: 50, 0
                orientation: 'vertical'
                Button:
                    text: 'Okay'
                    on_release: root.manager.current = 'login_scr'
                Label:
                    text: ''
    

<FilePickerScreen1>:
    BoxLayout:
        orientation: 'vertical'

        FileChooserIconView:
            size_hint: 1, .92
            id: filechooser
            on_selection: root.selected(filechooser.selection)

        BoxLayout:
            padding: 50, 2
            size_hint: 1, .08
            Label:
            Button:
                text: 'Choose...'
                on_release: root.done_selection()
            Label:   
    
<FilePickerScreen2>:
    BoxLayout:
        orientation: 'vertical'

        FileChooserIconView:
            size_hint: 1, .92
            id: filechooser
            on_selection: root.selected(filechooser.selection)

        BoxLayout:
            padding: 50, 2
            size_hint: 1, .08
            Label:
            Button:
                text: 'Choose...'
                on_release: root.done_selection()
            Label:

<FilePickerScreen3>:
    
    BoxLayout:
        orientation: 'vertical'

        FileChooserIconView:
            size_hint: 1, .92
            id: filechooser
            on_selection: root.selected(filechooser.selection)

        BoxLayout:
            padding: 50, 2
            size_hint: 1, .08
            Label:
            Button:
                text: 'Choose...'
                on_release: root.done_selection()
            Label:
                
<FilePickerScreen4>:
    BoxLayout:
        orientation: 'vertical'

        FileChooserIconView:
            size_hint: 1, .92
            id: filechooser
            on_selection: root.selected(filechooser.selection)

        BoxLayout:
            padding: 50, 2
            size_hint: 1, .08
            Label:
            Button:
                text: 'Choose...'
                on_release: root.done_selection()
            Label:                                  


<TermsOfServiceScreen>:
    orientation: 'vertical'

    ### root background ###
    Image:
        source: 'res/bg_2 (1).jpg'
        color: .5, .5, .5, .2 

    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint: 1, .1
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: "TERMS OF SERVICE: V1.0.0:"
                Label:
                    markup: True
                    on_ref_press: root.open_mail_client()
                    text: "For more information contact: [color=3344ff][b][ref=finance.aixpro@gmail.com]finance.aixpro@gmail.com[/ref][/b][/color]"

        BoxLayout:
            size_hint: 1, .8
            padding: 20, 0
            ScrollView:
                do_scroll_x: False
                do_scroll_y: True

                Label:
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None
                    padding: 10, 10
                    text: ''
                    id: terms_of_service

        BoxLayout:
            padding: 300, 10
            size_hint: 1, .1
            Button:
                text: "I Agree"
                on_release: root.goto_register_scr()
    